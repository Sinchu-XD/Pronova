[phases.setup]
aptPkgs = [
  "git",
  "curl",
  "python3",
  "python3-pip",
  "python3-dev",
  "ffmpeg",
  "gcc",
  "libffi-dev",
  "build-essential"
]

[phases.install]
cmds = [
  # Node 20
  "curl -fsSL https://deb.nodesource.com/setup_20.x | bash -",
  "apt-get install -y nodejs",

  # pipx
  "pip install --break-system-packages pipx",

  # requirements
  "pip install --break-system-packages -r requirements.txt",

  # pipx yt-dlp (no uninstall drama)
  "python3 -m pipx install yt-dlp[default] || true"
]

[phases.start]
cmd = "export PATH=$PATH:/root/.local/bin && python3 -m Bot"
